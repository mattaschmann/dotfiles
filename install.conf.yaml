- defaults:
    link:
      create: true
      relink: true
    shell:
      stdout: true
      stderr: true
      quiet: true

- clean: ['~']

- link:
    ~/.config/alacritty/alacritty.toml: alacritty/alacritty.toml
    ~/.config/coc/extensions/package.json: coc/package.json
    ~/.config/coc/ultisnips: coc/ultisnips
    ~/.config/nvim/coc-settings.json: nvim/coc-settings.json
    ~/.config/nvim/config: nvim/config
    ~/.config/nvim/ginit.vim: nvim/ginit.vim
    ~/.config/nvim/init.vim: nvim/init.vim
    ~/.config/nvim/lua: nvim/lua
    ~/.ctags.d: universal_ctags
    ~/.dotfiles: ''
    ~/.ignore: rg/.ignore
    ~/.jsbeautifyrc: jsbeautify/.jsbeautifyrc
    ~/.tigrc: tig/.tigrc
    ~/.tmux.conf: tmux/.tmux.conf
    ~/.urlview: urlview/.urlview
    ~/.zprofile: zsh/.zprofile
    ~/.zsh_plugins.txt: zsh/.zsh_plugins.txt
    ~/.zshrc:
      path: zsh/.zshrc
      force: true

- create:
    - ~/bin
    - ~/opt
    - ~/.ssh

- shell:
    -
      description: Installing submodules
      command: git submodule update --init --recursive
    -
      description: Add special terminfos so we can use italics
      command: |
        tic terminfo/xterm-256color.terminfo
        tic terminfo/tmux.terminfo
        tic terminfo/xterm-256color.terminfo
    -
      description: Install brew packages (osx only)
      command: |
        if ! command -v cargo &> /dev/null
        then
          echo "cargo not found"
          echo "see: https://www.rust-lang.org/learn/get-started"
          exit 1
        else
          brew bundle
        fi
    - description: Install rust packages
      command: |
        if ! command -v cargo &> /dev/null
        then
          echo "cargo not found"
          echo "see: https://www.rust-lang.org/learn/get-started"
          exit 1
        else
          cargo install cargo-update
          cargo install ripgrep
          cargo install bat
          cargo install exa
          cargo install fd-find
        fi
    - description: Install Tmux Plugin Manager
      command: |
        if ! test -d ~/.tmux/plugins/tpm; then
          git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm
        else
          echo "TPM already installed"
        fi
    - description: Install FNM (for nodejs)
      command: |
        if ! command -v fnm &> /dev/null
        then
          echo "fnm not found"
          echo "see: https://github.com/Schniz/fnm"
          exit 1
        else
          echo "fnm already installed"
        fi
    - description: Install Starship CLI
      command: |
        if ! command -v starship &> /dev/null
        then
          echo "starship not found"
          echo "see: https://starship.rs/"
          exit 1
        else
          echo "starship already installed"
        fi
    - description: Install fzf
      command: |
        if ! command -v fzf &> /dev/null
        then
          echo "fzf not found"
          echo "see: https://github.com/junegunn/fzf"
          exit 1
        else
          echo "starship already installed"
        fi
